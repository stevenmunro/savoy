/* NM: Shop search script */
(function(c){c.extend(c.nmTheme,{search_init:function(){this.$searchPanel.hasClass("nm-shop-search-ajax")&&this.shopSearchBind()},shopSearchBind:function(){var a=this,b,d,g,f;a.$searchInput=a.searchInHeader?c("#nm-shop-search-input, #nm-mobile-menu-shop-search-input"):c("#nm-shop-search-input");a.searchAjax=null;a.currentSearch="";a.$searchInput.keypress(function(e){b=c(this);d=b.val();g=e.keyCode?e.keyCode:e.which;"13"==g&&(e.preventDefault(),(f=a.shopSearchValidateInput(d))&&a.currentSearch!==d?
b.hasClass("nm-mobile-menu-search")?(a.$pageOverlay.trigger("click"),setTimeout(function(){c("#nm-mobile-menu-shop-search-input").val("");a.shopSearch(d)},a.panelsAnimSpeed)):("0"!=nm_wp_vars.shopSearchAutoClose?a.$searchBtn.trigger("click"):a.$searchNotice.removeClass("show"),setTimeout(function(){a.shopSearch(d)},a.filterPanelSlideSpeed)):a.currentSearch=d)})},shopSearch:function(a){var b=this;b.$searchInput.blur();"popup"==b.shopSidebarLayout&&b.shopFiltersPopupHide();b.shopShowLoader();b.currentSearch=
a;b.searchAjax=c.ajax({url:nm_wp_vars.searchUrl+encodeURIComponent(a),data:{shop_load:"search",post_type:"product",shop_filters_layout:b.shopSidebarLayout},dataType:"html",method:"GET",error:function(a,c,f){console.log("NM: AJAX error - shopSearch() - "+f);b.shopHideLoader();b.searchAjax=null},success:function(a){b.shopUpdateContent(a);b.searchAjax=null}})}});c.nmThemeExtensions.search=c.nmTheme.search_init})(jQuery);